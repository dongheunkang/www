<html>
<body style="background-color:white;">
<h3>WebMedia Test EME VP9 profile capabilities</h3>
<div id="output" class="output">
  <pre style="font-size:16px;" id="log"></pre>
</div>
 
<script>
var trace = {
  log: function() {
    var line = Array.prototype.slice.call(arguments).map(function(argument) {
      return typeof argument === 'string' ? argument : JSON.stringify(argument);
    }).join(' ');

    document.querySelector('#log').textContent += line + '\n';
  },

  clearLog: function() {
    document.querySelector('#log').textContent = '';
  },
};

function query(para, expected) {
  var result = MediaSource.isTypeSupported(para);
  trace.log((result == expected ? "PASS":"FAIL") + " : MediaSource.isTypeSupported('" + para + "')" + " = " + result);
  return result == expected;
}

var capabilities_expected_true = [
  'video/webm; codecs="vp9"',
  'video/webm; codecs="vp9.2"',
  'video/webm; codecs="vp09.02.10.08"'
];

function test() {
  fail_count = 0;
  trace.log('-----------------------------------------');
  trace.log('EME VP9 profile Case (expected True)');
  trace.log('-----------------------------------------');
  for (var i = 0; i < capabilities_expected_true.length; i++)
    if (!query(capabilities_expected_true[i], true))
      fail_count += 1;
  trace.log('-----------------------------------------');

  return !(fail_count > 0);
}
</script>
</body>
</html>

